<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Robert Smith — CAD Portfolio</title>
  <meta name="description" content="Selected SolidWorks models and drawings: guards, brackets, fixtures, housings, and manufacturable components." />

  <link rel="icon" type="image/x-icon" href="/favicon.ico?v=2">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2">

  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="stylesheet" href="/assets/css/style.css?v=31" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>
<body class="page-cad">
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header" role="banner">
    <div class="container">
      <nav class="nav" aria-label="Primary">
        <a class="brand-logo" href="/" aria-label="Go to home">
          <img src="/assets/img/logo.svg" alt="RS logo" loading="eager" decoding="async">
          <span class="brand-text">Robert Smith</span>
        </a>
        <button class="menu-toggle" aria-expanded="false" aria-controls="nav-links" aria-label="Toggle menu">
          <span class="bar"></span><span class="bar"></span><span class="bar"></span>
        </button>
        <div id="nav-links" class="nav-links">
          <a href="/">Home</a>
          <a href="/pages/projects.html">Projects</a>
          <a href="/pages/cad.html" class="active" aria-current="page">CAD</a>
          <a href="/pages/personal.html">Personal</a>
          <a href="/pages/resume.html">Resume</a>
          <a href="/pages/contact.html" class="btn btn-sm">Contact</a>
        </div>
      </nav>
    </div>
  </header>

  <section class="subhero hero" data-aos="fade-up" aria-label="CAD intro">
    <div class="container">
      <h1>Selected Models & Drawings</h1>
      <p class="lede">Practical, manufacturable components — guards, brackets, fixtures, housings. Click a tile to view larger.</p>

      <div class="cta-row">
        <!-- Update these to your actual PDF path -->
        <a class="btn" href="/assets/files/Robert_Smith_CAD_Portfolio.pdf" download>
          Download CAD Portfolio (PDF)
        </a>
      </div>
    </div>
  </section>

  <main id="main" class="section" aria-label="CAD gallery">
    <div class="container">
      <div class="gallery-grid">
        <!-- 1: Guard Panel Set -->
        <figure class="card" data-aos="fade-up">
          <a class="gallery-link" href="/assets/img/cad/guard/1.jpg"
             data-gallery='[
               "/assets/img/cad/guard/1.jpg",
               "/assets/img/cad/guard/2.jpg",
               "/assets/img/cad/guard/3.jpg",
               "/assets/img/cad/guard/4.jpg",
               "/assets/img/cad/guard/5.jpg"
             ]' aria-label="Open: Guard panel set">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/guard/1.jpg" alt="Machine guard panel set — assembly render" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Machine Guard — panel set & fixings.</figcaption>
        </figure>

        <!-- 2: Bracket Assembly -->
        <figure class="card" data-aos="fade-up" data-aos-delay="60">
          <a class="gallery-link" href="/assets/img/cad/bracket/1.jpg"
             data-gallery='[
               "/assets/img/cad/bracket/1.jpg",
               "/assets/img/cad/bracket/2.jpg",
               "/assets/img/cad/bracket/3.jpg",
               "/assets/img/cad/bracket/4.jpg"
             ]' aria-label="Open: Bracket assembly">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/bracket/1.jpg" alt="Bracket assembly with tolerances" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Bracket — assembly & drawing tolerances.</figcaption>
        </figure>

        <!-- 3: Fixture Plate -->
        <figure class="card" data-aos="fade-up" data-aos-delay="120">
          <a class="gallery-link" href="/assets/img/cad/fixture/1.jpg"
             data-gallery='[
               "/assets/img/cad/fixture/1.jpg",
               "/assets/img/cad/fixture/2.jpg",
               "/assets/img/cad/fixture/3.jpg",
               "/assets/img/cad/fixture/4.jpg"
             ]' aria-label="Open: Fixture plate">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/fixture/1.jpg" alt="Fixture plate concept" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Fixture — plate and clamp points.</figcaption>
        </figure>

        <!-- 4: Motor Housing -->
        <figure class="card" data-aos="fade-up">
          <a class="gallery-link" href="/assets/img/cad/housing/1.jpg"
             data-gallery='[
               "/assets/img/cad/housing/1.jpg",
               "/assets/img/cad/housing/2.jpg",
               "/assets/img/cad/housing/3.jpg"
             ]' aria-label="Open: Motor housing">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/housing/1.jpg" alt="Motor housing cross-section" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Motor Housing — section & fasteners.</figcaption>
        </figure>

        <!-- 5: Adapter Plate -->
        <figure class="card" data-aos="fade-up" data-aos-delay="60">
          <a class="gallery-link" href="/assets/img/cad/adapter/1.jpg"
             data-gallery='[
               "/assets/img/cad/adapter/1.jpg",
               "/assets/img/cad/adapter/2.jpg",
               "/assets/img/cad/adapter/3.jpg"
             ]' aria-label="Open: Adapter plate">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/adapter/1.jpg" alt="Adapter plate model and drawing" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Adapter Plate — bolt pattern & countersinks.</figcaption>
        </figure>

        <!-- 6: Clamp Jaws -->
        <figure class="card" data-aos="fade-up" data-aos-delay="120">
          <a class="gallery-link" href="/assets/img/cad/clamp/1.jpg"
             data-gallery='[
               "/assets/img/cad/clamp/1.jpg",
               "/assets/img/cad/clamp/2.jpg",
               "/assets/img/cad/clamp/3.jpg",
               "/assets/img/cad/clamp/4.jpg"
             ]' aria-label="Open: Clamp jaws">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/clamp/1.jpg" alt="Clamp jaws with serrations" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Clamp Jaws — serrations & inserts.</figcaption>
        </figure>

        <!-- 7: Transfer Chute -->
        <figure class="card" data-aos="fade-up">
          <a class="gallery-link" href="/assets/img/cad/chute/1.jpg"
             data-gallery='[
               "/assets/img/cad/chute/1.jpg",
               "/assets/img/cad/chute/2.jpg",
               "/assets/img/cad/chute/3.jpg",
               "/assets/img/cad/chute/4.jpg",
               "/assets/img/cad/chute/5.jpg"
             ]' aria-label="Open: Transfer chute">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/chute/1.jpg" alt="Transfer chute assembly" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Transfer Chute — liners & access.</figcaption>
        </figure>

        <!-- 8: Protective Cover -->
        <figure class="card" data-aos="fade-up" data-aos-delay="60">
          <a class="gallery-link" href="/assets/img/cad/cover/1.jpg"
             data-gallery='[
               "/assets/img/cad/cover/1.jpg",
               "/assets/img/cad/cover/2.jpg",
               "/assets/img/cad/cover/3.jpg"
             ]' aria-label="Open: Protective cover">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/cover/1.jpg" alt="Protective cover sheet metal" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Protective Cover — bends & clearances.</figcaption>
        </figure>

        <!-- 9: Shaft Key Block -->
        <figure class="card" data-aos="fade-up" data-aos-delay="120">
          <a class="gallery-link" href="/assets/img/cad/key/1.jpg"
             data-gallery='[
               "/assets/img/cad/key/1.jpg",
               "/assets/img/cad/key/2.jpg",
               "/assets/img/cad/key/3.jpg"
             ]' aria-label="Open: Shaft key block">
            <span class="thumb-wrap">
              <img class="thumb" src="/assets/img/cad/key/1.jpg" alt="Shaft key block drawing" loading="lazy" decoding="async">
              <span class="album-count"></span>
            </span>
          </a>
          <figcaption>Shaft Key Block — dims & tolerances.</figcaption>
        </figure>
      </div>
    </div>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="container"><p class="copyright">© 2025 Robert Smith</p></div>
  </footer>

  <!-- Lightbox dialog -->
  <dialog id="lightbox" class="lightbox" aria-label="Image viewer">
    <button class="lightbox-close" aria-label="Close">×</button>
    <button class="lightbox-prev" aria-label="Previous image">‹</button>
    <button class="lightbox-next" aria-label="Next image">›</button>
    <img id="lbImg" alt="">
    <div id="lbCaption" class="lightbox-caption"></div>
  </dialog>

  <!-- AOS + nav toggle -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      if (window.AOS) AOS.init({ once:true, duration:700, easing:'ease-out-cubic' });
      const toggle = document.querySelector('.menu-toggle');
      const links = document.getElementById('nav-links');
      if (toggle && links) {
        toggle.addEventListener('click', () => {
          const open = links.classList.toggle('show');
          toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
      }
    });
  </script>

  <!-- Lightbox: per-tile galleries (preload + swipe) -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const dlg  = document.getElementById('lightbox');
    const img  = document.getElementById('lbImg');
    const cap  = document.getElementById('lbCaption');
    const btnX = dlg.querySelector('.lightbox-close');
    const btnP = dlg.querySelector('.lightbox-prev');
    const btnN = dlg.querySelector('.lightbox-next');

    let gallery = [];
    let idx = 0;
    let title = '';
    let lastFocus = null;

    function preloadAround(i){
      if (!gallery.length) return;
      const prev = (i - 1 + gallery.length) % gallery.length;
      const next = (i + 1) % gallery.length;
      [prev, next].forEach(n => { const im = new Image(); im.src = gallery[n].src; });
    }

    function openAt(i){
      idx = (i + gallery.length) % gallery.length;
      const item = gallery[idx];
      img.src = item.src;
      img.alt = item.alt || title || 'Image';
      cap.textContent = (title ? title + ' — ' : '') + (idx + 1) + '/' + gallery.length;
      preloadAround(idx);
    }

    function openFromLink(a){
      lastFocus = document.activeElement;
      const fig = a.closest('figure');
      title = fig ? (fig.querySelector('figcaption')?.textContent || '') : '';

      try {
        const list = JSON.parse(a.getAttribute('data-gallery') || '[]');
        gallery = list.map((src, i) => ({ src, alt: a.querySelector('img')?.alt || (title ? `${title} ${i+1}` : 'Image') }));
      } catch {
        gallery = [{ src: a.href, alt: a.querySelector('img')?.alt || title || 'Image' }];
      }

      if (typeof dlg.showModal === 'function') dlg.showModal();
      openAt(0);
      btnX.focus();
    }

    document.querySelectorAll('.gallery-link').forEach(a => {
      a.addEventListener('click', e => { e.preventDefault(); openFromLink(a); });
    });

    btnX.addEventListener('click', () => { dlg.close(); if (lastFocus) lastFocus.focus(); });
    btnP.addEventListener('click', () => openAt(idx - 1));
    btnN.addEventListener('click', () => openAt(idx + 1));
    dlg.addEventListener('click', e => { if (e.target === dlg) dlg.close(); });

    document.addEventListener('keydown', e => {
      if (!dlg.open) return;
      if (e.key === 'Escape') dlg.close();
      if (e.key === 'ArrowLeft')  openAt(idx - 1);
      if (e.key === 'ArrowRight') openAt(idx + 1);
    });

    // touch swipe
    let startX = null;
    dlg.addEventListener('touchstart', e => { startX = e.changedTouches?.[0]?.clientX ?? null; }, {passive:true});
    dlg.addEventListener('touchend',   e => {
      if (startX == null) return;
      const dx = e.changedTouches?.[0]?.clientX - startX;
      if (Math.abs(dx) > 40) openAt(idx + (dx < 0 ? 1 : -1));
      startX = null;
    }, {passive:true});
  });
  </script>

  <!-- Auto-count the photo pill per tile -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.gallery-link').forEach(link => {
      const wrap = link.querySelector('.thumb-wrap');
      if (!wrap) return;
      let n = 1;
      try {
        const arr = JSON.parse(link.getAttribute('data-gallery') || '[]');
        if (Array.isArray(arr) && arr.length) n = arr.length;
      } catch {}
      let badge = wrap.querySelector('.album-count');
      if (!badge) { badge = document.createElement('span'); badge.className = 'album-count'; wrap.appendChild(badge); }
      badge.textContent = `${n} photo${n === 1 ? '' : 's'}`;
    });
  });
  </script>
</body>
</html>
